{% extends './base.html'%} {% load static %} {% block content%}

<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <!--<![endif]-->
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title></title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="" />

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

    <!-- Popper.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.3/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC6T8KDbJiGkvzkrVr51za7Md0Z0TgzYTY&libraries=places"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <style>
        @media (max-width: 768px) {
            footer {
                fluid;
                width: 450%;
                margin: 0;
                padding: 0px !important;
              }
              .top-div {
                flex-direction: column;
              }
              #map {
                margin-top: 20px;
                width: 100% !important;
              }
              .top-div {
                padding: 10px !important;
              }
              .sec-div {
                width: 100% !important;
              }
        }
        #map {
          height: 400px;
          width: 40%;
        }
        .head-text {
          font-size: 50px;
          font-weight: 700;
          color: #000;
          margin-bottom: 20px;
          text-align: center;
          width: 100% !important;
        }
        .top-div {
          display: flex;
          justify-content: space-between;
          padding: 40px 80px;
          align-items: center;
        }
        .btn {
          background-color: #d3072f;
          border: none;
          transition: transform 0.3s ease 0s;
        }
        .btn:hover {
          background-color: #d3072f !important;
          border: none;
          transform: scale(1.1);
        }
        body {
        background-color: #f5f5f5;
        }
      .all-contentt {
        padding: 10px 50px;
      }
       
      .col {
        border: 1px solid #ccc;
        border-radius: 5px;
        margin: 10px;
        padding: 10px;
        background-color: #fff;
      }
      .btn-primary {
        display: flex;
        align-items: center !important;
        justify-content: center !important;
        flex-direction: column !important;
      
        background-color: #d3072f;
        border: none;
        transition: transform 0.3s ease 0s;
      }
      .btn-primary:hover {
        background-color: #d3072f !important;
        border: none;
        transform: scale(1.1);
      }
      .modal {
        display: none; /* Hidden by default */
        position: fixed; /* Stay in place */
        z-index: 1; /* Sit on top */
        padding-top: 100px; /* Location of the box */
        left: 0;
        top: 0;
        width: 100%; /* Full width */
        height: 100%; /* Full height */
        overflow: auto; /* Enable scroll if needed */
        background-color: rgb(0,0,0); /* Fallback color */
        background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
      }
      
      .modal-content {
        background-color: #fefefe;
        margin: auto;
        padding: 20px;
        border: 1px solid #888;
        width: 80%;
      }
      
      .close {
        color: #aaaaaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
      }
      
      .close:hover,
      .close:focus {
        color: #000;
        text-decoration: none;
        cursor: pointer;
      }
      .modal-backdrop {
        display: none;
    }
    .image-container {
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .flex-image {
      max-width: 100%;
      height: auto;
      margin-top: 0%
    }

    .col-md-5 {
      display: flex;
      flex-direction: column;
      border: 2px solid #d9d9d9;
      margin: 0% 1%;
      padding: 0px;
      gap: 10px;
      justify-content: space-evenly !important;
    }
    .text-in {
      padding: 0%;
      flex: 1;
      text-align: center !important;
      background: white;
    }
    .modal-xl {
      max-width: 90%; 
  }
    </style>
  </head>
  <body>
    <!--[if lt IE 7]>
      <p class="browsehappy">
        You are using an <strong>outdated</strong> browser. Please
        <a href="#">upgrade your browser</a> to improve your experience.
      </p>
    <![endif]-->
    <div class="all-contentt">
      <h1>Bookings</h1>
      <hr />
      {% if messages %}
  
{% endif %}
      <div class="container">
        {% for booking in bookings %}
        <div class="row">
          
          <div class="col">
            <h2>{{ booking.pickUp }} to {{ booking.dropOff }}</h2>
            <p>First Name: {{ booking.firstName }}</p>
            <p>Last Name: {{ booking.lastName }}</p>
            <p>Email: {{ booking.email }}</p>
            <p>Phone: {{ booking.phone }}</p>
            <p>Pick Up Location: {{ booking.pickUp }}</p>
            <p>Drop Off Location: {{ booking.dropOff }}</p>
            <p>Vehicle: {{ booking.vehicle }}</p>
            <p>Price: R{{ booking.price }}</p>
            <p>Date: {{ booking.date }}</p>
            <p>Time: {{ booking.time }}</p>
            <p>Time: {{ booking.id }}</p>
            <div style="display: flex; justify-content: start; gap: 20px;">
              
              <button type="submit" id="myBtn" class="btn btn-primary">
                  Edit Booking Details
              </button>
              <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#vehicleModal">
                Change Vehicle
              </button>
              <form method="POST" action="{% url 'delete_booking' booking.id %}">
                {% csrf_token %}
                <input type="hidden" name="booking_id" value="{{ booking.id }}">
                <button type="submit" class="btn btn-primary">
                  Cancel Booking
                </button>
              </form>
          </div>
          </div>
          
        </div>
        <div id="myModal" class="modal">
          <div class="modal-content">
            <span class="close">&times;</span>
            <div class="top-div" style="">
              <div style="width: 50%" class="sec-div">
                <h1 class="head-text">Edit Booking</h1>
                <hr />
                <form
                  method="POST"
                  onsubmit="store()"
                  id="myForm{{ booking.id }}"
                >
                  {% csrf_token %}
        
                  <label for="exampleFName" class="form-label">First Name</label>
                  <input
                    type="text"
                    class="form-control mb-2"
                    id="exampleFName"
                    aria-describedby="firstName"
                    value="{{ booking.firstName }}"
                  />
                  <label for="exampleSName" class="form-label">Surname</label>
                  <input
                    type="text"
                    class="form-control mb-2"
                    id="exampleSName"
                    aria-describedby="SName"
                    value="{{ booking.lastName }}"
                  />
                  <label for="examplePick" class="form-label">Pick Up Location</label>
                  <input
                    type="text"
                    class="form-control mb-2"
                    id="examplePick"
                    aria-describedby="pickUpLocation"
                    value = "{{ booking.pickUp }}"
                  />
                  <label for="exampleDrop" class="form-label">Drop Off Location</label>
                  <input
                    type="text"
                    class="form-control mb-2"
                    id="exampleDrop"
                    aria-describedby="dropOffLocation"
                    value = "{{ booking.dropOff }}"
                  />
                  <div class="mb-2">
                    <label for="exampleDateTime" class="form-label"
                      >Date and time of your booking</label
                    >
                    <input
                      type="datetime-local"
                      class="form-control mb-2"
                      id="exampleDateTime"
                      aria-describedby="dateTime"
                      value = "{{ booking.date }}T{{ booking.time }}"
                    />
                  </div>
                  <div class="mb-2">
                    <label for="email" class="form-label">Email address</label>
                    <input
                      type="email"
                      class="form-control"
                      id="email"
                      aria-describedby="emailHelp"
                      value="{{ booking.email }}"
                    />
        
                    <div id="emailHelp" class="form-text">
                      We'll never share your email with anyone else.
                    </div>
                  </div>
        
                  <div class="mb-3">
                    <label for="examplePhone" class="form-label">Phone number</label>
                    <input
                      type="text"
                      class="form-control"
                      id="examplePhone"
                      aria-describedby="emailHelp"
                      value="{{ booking.phone }}"
                    />
                    <div id="emailHelp" class="form-text">
                      We'll never share your phone number with anyone else.
                    </div>
                  </div>
                  <div id="output" class="mb-3"></div>
                  <button
                    type="submit"
                    id="myButton{{ booking.id }}"
                    onclick="calculateAndDisplayRoute()"
                    class="btn btn-primary"
                    target=""
                  >
                    Update Details
                  </button>
                </form>
              </div>
              <div id="map" style="height: 400px; width: 40%"></div>
            </div>
          </div>
        </div>
        <div class="modal" tabindex="-1" id="vehicleModal">
          <div class="modal-dialog modal-xl">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title">Change Vehicle</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <form id="vehicleForm{{booking.id}}">
                  {% csrf_token %}
                  <div class="container text-center">
                    <div class="row">
                      <div class="col fluid mb-3">
                        <h2 class="mt-3">Toyota Corolla</h2>
                        <div class="text-in">
                          <p>3 Passengers | 3 bags</p>
                        </div>
                        <img
                          src="{% static 'toyota-corolla.png' %}"
                          alt="Limousine"
                          class="flex-image fluid"
                        />
                        <div class="text-in">
                          
                            <button
                              type="button"
                              class="btn btn-dark mt-4 rounded-0"
                              style="width: 70%; font-weight: 600"
                              id="buttn{{booking.id}}"
                              onclick="storeTC()"
                            ></button>
                          
                        </div>
                      </div>
                      <div class="col fluid mb-3">
                        <h2 class="mt-3">BMW 5 Series</h2>
                        <div class="text-in">
                          <p>3 Passengers | 3 bags</p>
                        </div>
                        <img
                          src="{% static 'bmw-520i-feature.jpg' %}"
                          alt="Limousine"
                          class="flex-image fluid"
                        />
                        <div class="text-in">
                          
                            <button
                              type="button"
                              class="btn btn-dark mt-4 rounded-0"
                              style="width: 70%; font-weight: 600"
                              id="buttn{{booking.id}}"
                              onclick="store5S()"
                            ></button>
                          
                        </div>
                      </div>
                      <div class="col fluid mb-3">
                        <h2 class="mt-3">BMW 7 Series</h2>
                        <div class="text-in">
                          <p>3 Passengers | 3 bags</p>
                        </div>
                        <img
                          src="{% static 'bmw740d_feature-min.jpg' %}"
                          alt="Limousine"
                          class="flex-image fluid"
                        />
                        <div class="text-in">
                          
                            <button
                              type="button"
                              class="btn btn-dark mt-4 rounded-0"
                              style="width: 70%; font-weight: 600"
                              id="buttn{{booking.id}}"
                              onclick="store7S()"
                            ></button>
                          
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col fluid mb-3">
                        <h2 class="mt-3">Mercedes C Class</h2>
                        <div class="text-in">
                          <p>3 Passengers | 3 bags</p>
                        </div>
                        <img
                          src="{% static 'Mercedes-Benz-C220d-Sedan-AMG-Line-2023.jpg' %}"
                          alt="Limousine"
                          class="flex-image fluid"
                        />
                        <div class="text-in">
                          
                            <button
                              type="button"
                              class="btn btn-dark mt-4 rounded-0"
                              style="width: 70%; font-weight: 600"
                              id="buttn{{booking.id}}"
                              onclick="storeMC()"
                            ></button>
                          
                        </div>
                      </div>
                      <div class="col fluid mb-3">
                        <h2 class="mt-3">BMW X5</h2>
                        <div class="text-in">
                          <p>3 Passengers | 3 bags</p>
                        </div>
                        <img
                          src="{% static 'bmw-x5-feature.jpg' %}"
                          alt="Limousine"
                          class="flex-image fluid"
                        />
                        <div class="text-in">
                          
                            <button
                              type="button"
                              class="btn btn-dark mt-4 rounded-0"
                              style="width: 70%; font-weight: 600"
                              id="buttn{{booking.id}}"
                              onclick="store5X()"
                            ></button>
                          
                        </div>
                      </div>
                      <div class="col fluid mb-3">
                        <h2 class="mt-3">BMW X7</h2>
                        <div class="text-in">
                          <p>3 Passengers | 3 bags</p>
                        </div>
                        <img
                          src="{% static 'bmw_x7_23_feature-min.jpg' %}"
                          alt="Limousine"
                          class="flex-image fluid"
                        />
                        <div class="text-in">
                          
                            <button
                              type="button"
                              class="btn btn-dark mt-4 buttn{{booking.id}} rounded-0"
                              style="width: 70%; font-weight: 600"
                              id="buttn{{booking.id}}"
                              onclick="store7X()"
                            ></button>
                          
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col fluid mb-3">
                        <h2 class="mt-3">Range Rover Sport</h2>
                        <div class="text-in">
                          <p>3 Passengers | 3 bags</p>
                        </div>
                        <img
                          src="{% static 'RangeRoverSport_TDV6_feature-min.jpg' %}"
                          alt="Limousine"
                          class="flex-image fluid"
                        />
                        <div class="text-in">
                          
                            <button
                              type="button"
                              class="btn btn-dark mt-4 buttn{{booking.id}} rounded-0"
                              style="width: 70%; font-weight: 600"
                              id="buttn{{booking.id}}"
                              onclick="storeRS()"
                            ></button>
                          
                        </div>
                      </div>
                      <div class="col fluid mb-3">
                        <h2 class="mt-3">Mercedes V Class</h2>
                        <div class="text-in">
                          <p>3 Passengers | 3 bags</p>
                        </div>
                        <img
                          src="{% static 'mercedes-v-class.jpg' %}"
                          alt="Limousine"
                          class="flex-image fluid"
                        />
                        <div class="text-in">
                          
                            <button
                              type="button"
                              class="btn btn-dark mt-4 buttn{{booking.id}} rounded-0"
                              style="width: 70%; font-weight: 600"
                              id="buttn{{booking.id}}"
                              onclick="storeMV()"
                            ></button>
                          
                        </div>
                      </div>
                      <div class="col fluid mb-3">
                        <h2 class="mt-3">Toyota Quantum</h2>
                        <div class="text-in">
                          <p>3 Passengers | 3 bags</p>
                        </div>
                        <img
                          src="{% static 'toyota-quantum-feature.jpg' %}"
                          alt="Limousine"
                          class="flex-image fluid"
                        />
                        <div class="text-in">
                          
                            <button
                              type="button"
                              class="btn btn-dark mt-4 buttn{{booking.id}} rounded-0"
                              style="width: 70%; font-weight: 600"
                              id="buttn{{booking.id}}"
                              onclick="storeTQ()"
                            ></button>
                          
                        </div>
                      </div>
                    </div>
                    <div class="row" style="width: 100%">
                      <div class="col fluid mb-3">
                        <h2 class="mt-3">Volswagen Kombi</h2>
                        <div class="text-in">
                          <p>3 Passengers | 3 bags</p>
                        </div>
                        <img
                          src="{% static 'volkswagen-t5-kombi-feature-removebg-preview.png' %}"
                          alt="Limousine"
                          class="flex-image fluid"
                        />
                        <div class="text-in">
                          
                            <button
                              type="button"
                              class="btn btn-dark mt-4 buttn{{booking.id}} rounded-0"
                              style="width: 70%; font-weight: 600"
                              id="buttn{{booking.id}}"
                              onclick="storeVK(), "
                            ></button>
                          
                        </div>
                      </div>
                      <div class="col fluid mb-3 border-0"></div>
                      <div class="col fluid mb-3 border-0"></div>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
        
        <script>
          $(document).ready(function(){
            $("#myForm{{booking.id}}").submit(function(e){
                e.preventDefault();
        
                var pickUpLocation = localStorage.getItem("examplePick");
                var dropOffLocation = localStorage.getItem("exampleDrop");
                var pickUp = localStorage.getItem("exampleDateTime");
                var firstName = localStorage.getItem("exampleFName");
                var lastName = localStorage.getItem("exampleSName");
                var email = localStorage.getItem("email");
                var phone = localStorage.getItem("examplePhone");
        
                var data = {
                    pickUpLocation: pickUpLocation,
                    dropOffLocation: dropOffLocation,
                    pickUp: pickUp,
                    firstName: firstName,
                    lastName: lastName,
                    email: email,
                    phone: phone,
                };

                
        
                $.ajax({
                    url: "{% url 'update_booking' booking.id %}",
                    type: 'post',
                    data: $.param(data),
                    beforeSend: function(xhr) {
                        xhr.setRequestHeader('X-CSRFToken', getCookie('csrftoken'));
                    },
                    
                    success: function(response){
                        // Close the modal
                        $("#myModal").hide();

                        $('.modal-backdrop').remove();
                        // Display a success message
                        if(response.status === 'success') {
                            alert('Booking details updated successfully');
                        } else {
                            alert('There was an error updating the booking details');
                        }
                        // Update the page with the new data
                        // This depends on the structure of your page and the data returned by the server
                    }
                });
            });
            $(document).ready(function() {
            $(".btn-dark").click(function() {
              var car = localStorage.getItem("car");
              var price = localStorage.getItem("price");

              var data = {
                    car: car,
                    price: price,
                };

                console.log(data)
                console.log("{% url 'update_booking' booking.id %}")
          
              $.ajax({
                  url: "{% url 'update_car_and_price' booking.id %}",  // Update this to the URL of your server-side script
                  method: 'POST',
                  data: $.param(data),
                  success: function(response) {
                      // Handle the response from the server
                      console.log(response);
                  }
              });
            });
          });
          
        });

        function getCookie(name) {
            var cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                var cookies = document.cookie.split(';');
                for (var i = 0; i < cookies.length; i++) {
                    var cookie = jQuery.trim(cookies[i]);
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }

        var amountTime;

      var amountDis;

      window.onload = function () {
        // Get the distance and time from local storage
        var distance = localStorage.getItem("distance");

        var distanceValue = distance.replace(" km", "");

        var time = localStorage.getItem("duration");

        var timeValue = time.match(/\d+/)[0];
        // Select the button with the id of that button
        var tcButton = document.getElementsByClassName("btn-dark")[0];
        var s5Button = document.getElementsByClassName("btn-dark")[1];
        var s7Button = document.getElementsByClassName("btn-dark")[2];
        var mcButton = document.getElementsByClassName("btn-dark")[3];
        var s5xButton = document.getElementsByClassName("btn-dark")[4];
        var s7xButton = document.getElementsByClassName("btn-dark")[5];
        var rsButton = document.getElementsByClassName("btn-dark")[6];
        var mvButton = document.getElementsByClassName("btn-dark")[7];
        var tqButton = document.getElementsByClassName("btn-dark")[8];
        var vkButton = document.getElementsByClassName("btn-dark")[9];

        amountTime = timeValue * 7 + 400;

        amountDis = distanceValue * 3;

        // Set the text content of the button to the distance
        tcButton.textContent = "R " + (amountDis + amountTime).toFixed(2);
        s5Button.textContent =
          "R " + ((amountDis + amountTime) * 1.8).toFixed(2);
        s7Button.textContent =
          "R " + ((amountDis + amountTime) * 1.9).toFixed(2);
        mcButton.textContent =
          "R " + ((amountDis + amountTime) * 1.7).toFixed(2);
        s5xButton.textContent =
          "R " + ((amountDis + amountTime) * 2).toFixed(2);
        s7xButton.textContent =
          "R " + ((amountDis + amountTime) * 2.1).toFixed(2);
        rsButton.textContent =
          "R " + ((amountDis + amountTime) * 2.3).toFixed(2);
        mvButton.textContent =
          "R " + ((amountDis + amountTime) * 3.1).toFixed(2);
        tqButton.textContent =
          "R " + ((amountDis + amountTime) * 2.3).toFixed(2);
        vkButton.textContent =
          "R " + ((amountDis + amountTime) * 2.1).toFixed(2);
      };

      function storeTC() {
        var price = (amountDis + amountTime).toFixed(2);
        localStorage.setItem("price", price);
        localStorage.setItem("car", "Toyota Corolla");
      }
      function store5S() {
        var price = ((amountDis + amountTime) * 1.8).toFixed(2);
        localStorage.setItem("price", price);
        localStorage.setItem("car", "BMW 5 Series");
      }
      function store7S() {
        var price = ((amountDis + amountTime) * 1.9).toFixed(2);
        localStorage.setItem("price", price);
        localStorage.setItem("car", "BMW 7 Series");
      }
      function storeMC() {
        var price = ((amountDis + amountTime) * 1.7).toFixed(2);
        localStorage.setItem("price", price);
        localStorage.setItem("car", "Mercedes Benz C Class");
      }
      function store5X() {
        var price = ((amountDis + amountTime) * 2).toFixed(2);
        localStorage.setItem("price", price);
        localStorage.setItem("car", "BMW X5");
      }
      function store7X() {
        var price = ((amountDis + amountTime) * 2.1).toFixed(2);
        localStorage.setItem("price", price);
        localStorage.setItem("car", "BMW X7");
      }
      function storeRS() {
        var price = ((amountDis + amountTime) * 2.3).toFixed(2);
        localStorage.setItem("price", price);
        localStorage.setItem("car", "Range Rover Sport");
      }
      function storeMV() {
        var price = ((amountDis + amountTime) * 3.1).toFixed(2);
        localStorage.setItem("price", price);
        localStorage.setItem("car", "Mercedes V Class");
      }
      function storeTQ() {
        var price = ((amountDis + amountTime) * 2.3).toFixed(2);
        localStorage.setItem("price", price);
        localStorage.setItem("car", "Toyota Quantum");
      }
      function storeVK() {
        var price = ((amountDis + amountTime) * 2.1).toFixed(2);
        localStorage.setItem("price", price);
        localStorage.setItem("car", "Volswagen Kombi");
      }


        </script>
        {% endfor %}
      </div>
    </div>
    
</div>


    <script>
      var modal = document.getElementById("myModal");
      var btn = document.getElementById("myBtn");
      var span = document.getElementsByClassName("close")[0];
      
      btn.onclick = function() {
        modal.style.display = "block";
      }
      
      span.onclick = function() {
        modal.style.display = "none";
      }
      
      window.onclick = function(event) {
        if (event.target == modal) {
          modal.style.display = "none";
        }
      }
      
      

      var map;
      var directionsService;
      var directionsRenderer;

      function initMap() {
        directionsService = new google.maps.DirectionsService();
        directionsRenderer = new google.maps.DirectionsRenderer();

        map = new google.maps.Map(document.getElementById("map"), {
          center: { lat: -26.204, lng: 28.047 },
          zoom: 8,
        });

        directionsRenderer.setMap(map);

        var autocompletePick = initializeAutocomplete("examplePick");
        var autocompleteDrop = initializeAutocomplete("exampleDrop");

        autocompletePick.addListener("place_changed", calculateAndDisplayRoute);
        autocompleteDrop.addListener("place_changed", calculateAndDisplayRoute);
      }

      function calculateAndDisplayRoute() {
        var origin = document.getElementById("examplePick").value;
        var destination = document.getElementById("exampleDrop").value;

        // Only call the Directions service when both fields are filled
        if (origin && destination) {
          directionsService.route(
            {
              origin: origin,
              destination: destination,
              travelMode: "DRIVING",
            },
            function (response, status) {
              if (status === "OK") {
                directionsRenderer.setDirections(response);

                // Extract distance and duration from the response
                var distance = response.routes[0].legs[0].distance.text;
                var duration = response.routes[0].legs[0].duration.text;

                localStorage.setItem("distance", distance);
                localStorage.setItem("duration", duration);
                // Display distance and duration
                document.getElementById("output").innerHTML =
                  "Distance: " + distance + ", Duration: " + duration;
              } else {
                window.alert("Directions request failed due to " + status);
              }
            }
          );
        }
      }

      function initializeAutocomplete(id) {
        var input = document.getElementById(id);
        var autocomplete = new google.maps.places.Autocomplete(input);
        return autocomplete;
      }

      google.maps.event.addDomListener(window, "load", initMap);

      function store() {
        var inputEmail = document.getElementById("email");
        localStorage.setItem("email", inputEmail.value);

        var examplePick = document.getElementById("examplePick");
        localStorage.setItem("examplePick", examplePick.value);

        var exampleDrop = document.getElementById("exampleDrop");
        localStorage.setItem("exampleDrop", exampleDrop.value);

        var exampleDateTime = document.getElementById("exampleDateTime");
        localStorage.setItem("exampleDateTime", exampleDateTime.value);

        var examplePhone = document.getElementById("examplePhone");
        localStorage.setItem("examplePhone", examplePhone.value);

        var exampleFName = document.getElementById("exampleFName");
        localStorage.setItem("exampleFName", exampleFName.value);

        var exampleSName = document.getElementById("exampleSName");
        localStorage.setItem("exampleSName", exampleSName.value);

        var output = document.getElementById("output");
        localStorage.setItem("output", output);
      }

      function storeVehicle() {
        var vehicle = document.getElementById("vehicle");
        localStorage.setItem("vehicle", vehicle.value);
      }

      for (var i in localStorage) {
        var item = localStorage.getKey(i);
        console.log(i + " => " + item);
      }

      console.log("test");

      
    </script>
    
  </body>
</html>

{% endblock %}
